# 実装計画

- [ ] 1. プロジェクト初期化と Cobra CLI 設定

  - `cobra-cli init --viper` を使用してプロジェクトを初期化
  - go.mod ファイルに必要な依存関係（AWS SDK Go v2、uber-go/zap 等）を追加
  - 基本的なディレクトリ構造（internal、pkg）を整理
  - _要件: 9.1, 9.2_

- [ ] 2. コアインターフェースの定義

  - internal/interfaces ディレクトリを作成
  - コアインターフェース（ConfigManager、AccountManager、PipelineMonitor 等）を定義
  - 共通の型定義（AFTConfig、AccountInfo 等）を実装
  - _要件: 9.1, 9.2_

- [ ] 3. 基本コマンド構造の実装

  - `cobra-cli add config` で config コマンドを追加
  - `cobra-cli add account` で account コマンドを追加
  - `cobra-cli add pipeline` で pipeline コマンドを追加
  - `cobra-cli add validate` で validate コマンドを追加
  - `cobra-cli add dashboard` で dashboard コマンドを追加
  - `cobra-cli add customization` で customization コマンドを追加
  - `cobra-cli add setup` で setup コマンドを追加
  - `cobra-cli add version` で version コマンドを追加
  - グローバルフラグ（--profile、--region、--output 等）を root コマンドに実装
  - _要件: 9.1, 9.3_

- [ ] 4. 設定管理システムの実装

  - Viper を使用した設定ファイル読み込み機能を実装（cobra-cli で自動生成されたベースを拡張）
  - AFTConfig 構造体と ConfigManager インターフェースを実装
  - 設定ファイルの検証機能を実装
  - `aft config show` コマンドを実装
  - _要件: 1.1, 1.2, 9.1, 9.2_

- [ ] 5. AWS SDK 統合とクレデンシャル管理

  - AWS SDK Go v2 を使用した AWS クライアントの初期化を実装
  - IAM ロールの引き受け機能を実装
  - AWS 接続テスト機能を実装
  - _要件: 9.3, 9.4_

- [ ] 6. AFT 設定確認機能の実装

  - AFT インフラストラクチャの健全性チェック機能を実装
  - AFT 設定情報の取得と表示機能を実装
  - 設定問題の検出と推奨修正方法の提示機能を実装
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [ ] 7. アカウント管理機能の実装
- [ ] 7.1 アカウント一覧表示機能

  - DynamoDB から AFT 管理アカウント情報を取得する機能を実装
  - アカウント情報のフィルタリング機能を実装
  - `aft account list` コマンドを実装
  - _要件: 2.1, 2.2, 2.4_

- [ ] 7.2 アカウント作成機能

  - AccountRequest 構造体の検証機能を実装
  - Terraform ファイル生成機能を実装
  - `aft account create` コマンドを実装
  - _要件: 8.1, 8.2, 8.3_

- [ ] 7.3 アカウント更新機能

  - アカウント設定更新機能を実装
  - 競合検出と警告機能を実装
  - `aft account update` コマンドを実装
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [ ] 8. パイプライン監視機能の実装
- [ ] 8.1 パイプラインステータス取得

  - CodeBuild プロジェクトのステータス取得機能を実装
  - パイプライン情報の統合表示機能を実装
  - `aft pipeline status` コマンドを実装
  - _要件: 5.1, 5.4_

- [ ] 8.2 パイプラインログ取得

  - CloudWatch Logs からログを取得する機能を実装
  - ログのフィルタリングと表示機能を実装
  - `aft pipeline logs` コマンドを実装
  - _要件: 5.2, 5.3_

- [ ] 9. 検証機能の実装

  - Terraform HCL 構文検証機能を実装
  - AFT 設定ファイル検証機能を実装
  - 組織ポリシーとの整合性チェック機能を実装
  - `aft validate` コマンドを実装
  - _要件: 4.1, 4.2, 4.3, 4.4_

- [ ] 10. カスタマイゼーション管理機能の実装

  - Git リポジトリとの連携機能を実装（go-git 使用）
  - カスタマイゼーション一覧表示機能を実装
  - カスタマイゼーションデプロイ機能を実装
  - `aft customization manage` コマンドを実装
  - _要件: 6.1, 6.2, 6.3, 6.4_

- [ ] 11. ダッシュボード機能の実装

  - AFT 管理メトリクス収集機能を実装
  - ダッシュボードデータの統合と表示機能を実装
  - 視覚的インジケーター（健全、警告、エラー）の実装
  - `aft dashboard` コマンドを実装
  - _要件: 7.1, 7.2, 7.3, 7.4_

- [ ] 12. 初期設定機能の実装

  - インタラクティブな設定ガイド機能を実装
  - AFT リポジトリアクセス検証機能を実装
  - 設定ファイル生成機能を実装
  - `aft setup` コマンドを実装
  - _要件: 9.1, 9.2, 9.3, 9.4_

- [ ] 13. エラーハンドリングとログ機能の実装

  - AFTError 構造体とエラーハンドリング機能を実装
  - uber-go/zap を使用した構造化ログ機能を実装
  - エラーメッセージと修復提案の表示機能を実装
  - _要件: 全要件のエラーハンドリング_

- [ ] 14. 出力フォーマット機能の実装

  - JSON、YAML、テーブル形式の出力機能を実装
  - 出力フォーマットの切り替え機能を実装
  - カラー出力とプレーンテキスト出力の対応
  - _要件: 全要件の出力フォーマット_

- [ ] 15. 単体テストの実装

  - 各コンポーネントの単体テストを作成
  - モック AWS サービスを使用したテストを実装
  - テストカバレッジ 80%以上を達成
  - _要件: 全要件のテスト_

- [ ] 16. 統合テストの実装

  - AWS サービスとの統合テストを作成
  - エンドツーエンドのシナリオテストを実装
  - CI/CD パイプラインでのテスト自動実行を設定
  - _要件: 全要件の統合テスト_

- [ ] 17. バージョン情報機能の実装

  - ビルド時のバージョン情報埋め込み機能を実装
  - `aft version` コマンドでバージョン、ビルド日時、Git コミットハッシュを表示
  - バージョン情報の構造化出力（JSON、YAML 対応）を実装
  - _要件: 全要件のバージョン管理_

- [ ] 18. ドキュメントとビルド設定
  - README.md、使用方法ドキュメントを作成
  - Makefile とビルドスクリプトを作成
  - リリース用の GitHub Actions ワークフローを設定
  - _要件: 全要件のドキュメント化_
